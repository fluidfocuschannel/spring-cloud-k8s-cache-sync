spring:
  application:
    name: cache-sync-service
  
  cloud:
    kubernetes:
      discovery:
        enabled: true
        all-namespaces: false  # Only discover services in the same namespace
        use-endpoints: true     # Fetch Endpoints so pod metadata is available
        include-pod-name: true  # Add pod.name to metadata
        metadata:
          add-labels: true            # Include service labels
          add-annotations: true       # Include service annotations
          add-pod-labels: true        # Include pod labels (needed for pod.name)
          add-pod-annotations: true   # Include pod annotations
        
      # Configuration for Kubernetes client
      client:
        namespace: default  # Can be overridden by environment variable
        
  # Cache configuration
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=10m

# Actuator configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,caches
      base-path: /actuator
  endpoint:
    caches:
      enabled: true
    health:
      enabled: true
      show-details: when-authorized
  
  # Health indicators
  health:
    kubernetes:
      enabled: true

# Server configuration
server:
  port: 8080

# Logging configuration
logging:
  level:
    root: INFO
    com.example.cachesync: DEBUG
    org.springframework.cloud.kubernetes: DEBUG
    org.springframework.cache: DEBUG

# Cache sync configuration
cache:
  sync:
    timeout: 5  # Timeout in seconds for cache sync operations
